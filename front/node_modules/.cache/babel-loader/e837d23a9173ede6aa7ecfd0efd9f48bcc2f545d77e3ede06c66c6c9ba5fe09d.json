{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport ProductsService from \"@/services/ProductsService.js\";\nimport ReviewService from \"@/services/ReviewService.js\";\nexport var ReviewModule = {\n  namespaced: true,\n  strict: true,\n  mutations: {\n    DO_SOMETHING: function DO_SOMETHING() {\n      return;\n    }\n  },\n  actions: {\n    createReview: function createReview(_ref, _ref2) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, rating, comment, productId, productRating, newRating;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              rating = _ref2.rating, comment = _ref2.comment, productId = _ref2.productId, productRating = _ref2.productRating;\n              commit(\"DO_SOMETHING\");\n              _context.prev = 3;\n              _context.next = 6;\n              return ReviewService.createReview({\n                rating: rating,\n                comment: comment,\n                productId: productId\n              });\n            case 6:\n              _context.next = 11;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](3);\n              console.log(_context.t0.response.data.error);\n            case 11:\n              if (!(rating != 0)) {\n                _context.next = 21;\n                break;\n              }\n              newRating = (productRating.peopleRated * productRating.rating + rating) / (productRating.peopleRated + 1);\n              _context.prev = 13;\n              _context.next = 16;\n              return ProductsService.updateProduct({\n                id: productId,\n                rating: newRating,\n                peopleRated: productRating.peopleRated + 1\n              });\n            case 16:\n              _context.next = 21;\n              break;\n            case 18:\n              _context.prev = 18;\n              _context.t1 = _context[\"catch\"](13);\n              console.log(_context.t1.response.data.error);\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[3, 8], [13, 18]]);\n      }))();\n    },\n    updateReview: function updateReview(_ref3, _ref4) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var commit, review, newRating, newComment, newRatingProduct, peopleRated;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref3.commit;\n              review = _ref4.review, newRating = _ref4.newRating, newComment = _ref4.newComment;\n              commit(\"DO_SOMETHING\");\n              _context2.prev = 3;\n              _context2.next = 6;\n              return ReviewService.updateReview({\n                id: review.id,\n                rating: newRating,\n                comment: newComment,\n                productId: review.ProductId\n              });\n            case 6:\n              _context2.next = 11;\n              break;\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](3);\n              console.log(_context2.t0.response.data.error);\n            case 11:\n              if (!(newRating != 0 && newRating != review.rating)) {\n                _context2.next = 21;\n                break;\n              }\n              if (review.rating == 0) {\n                peopleRated = review.Product.peopleRated + 1;\n                newRatingProduct = (review.Product.peopleRated * review.Product.rating + newRating) / peopleRated;\n              } else {\n                peopleRated = review.Product.peopleRated;\n                newRatingProduct = (review.Product.peopleRated * review.Product.rating + newRating - review.rating) / peopleRated;\n              }\n              _context2.prev = 13;\n              _context2.next = 16;\n              return ProductsService.updateProduct({\n                id: review.ProductId,\n                rating: newRatingProduct,\n                peopleRated: peopleRated\n              });\n            case 16:\n              _context2.next = 21;\n              break;\n            case 18:\n              _context2.prev = 18;\n              _context2.t1 = _context2[\"catch\"](13);\n              console.log(_context2.t1.response.data.error);\n            case 21:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[3, 8], [13, 18]]);\n      }))();\n    },\n    deleteReview: function deleteReview(_ref5, review) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var commit, newRatingProduct;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              commit = _ref5.commit;\n              commit(\"DO_SOMETHING\");\n              _context3.prev = 2;\n              _context3.next = 5;\n              return ReviewService.deleteReview(review.id);\n            case 5:\n              _context3.next = 10;\n              break;\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](2);\n              console.log(_context3.t0.response.data.error);\n            case 10:\n              if (!(review.rating != 0)) {\n                _context3.next = 20;\n                break;\n              }\n              if (review.Product.peopleRated == 1) {\n                newRatingProduct = 0;\n              } else {\n                newRatingProduct = (review.Product.peopleRated * review.Product.rating - review.rating) / (review.Product.peopleRated - 1);\n              }\n              _context3.prev = 12;\n              _context3.next = 15;\n              return ProductsService.updateProduct({\n                id: review.ProductId,\n                rating: newRatingProduct,\n                peopleRated: review.Product.peopleRated - 1\n              });\n            case 15:\n              _context3.next = 20;\n              break;\n            case 17:\n              _context3.prev = 17;\n              _context3.t1 = _context3[\"catch\"](12);\n              console.log(_context3.t1.response.data.error);\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[2, 7], [12, 17]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["ProductsService","ReviewService","ReviewModule","namespaced","strict","mutations","DO_SOMETHING","actions","createReview","_ref","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","commit","rating","comment","productId","productRating","newRating","wrap","_callee$","_context","prev","next","t0","console","log","response","data","error","peopleRated","updateProduct","id","t1","stop","updateReview","_ref3","_ref4","_callee2","review","newComment","newRatingProduct","_callee2$","_context2","ProductId","Product","deleteReview","_ref5","_callee3","_callee3$","_context3"],"sources":["C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/src/store/Review.js"],"sourcesContent":["import ProductsService from \"@/services/ProductsService.js\";\r\nimport ReviewService from \"@/services/ReviewService.js\";\r\nexport const ReviewModule = {\r\n  namespaced: true,\r\n  strict: true,\r\n  mutations: {\r\n    DO_SOMETHING() {\r\n      return;\r\n    },\r\n  },\r\n  actions: {\r\n    async createReview(\r\n      { commit },\r\n      { rating, comment, productId, productRating }\r\n    ) {\r\n      commit(\"DO_SOMETHING\");\r\n      try {\r\n        await ReviewService.createReview({\r\n          rating: rating,\r\n          comment: comment,\r\n          productId: productId,\r\n        });\r\n      } catch (error) {\r\n        console.log(error.response.data.error);\r\n      }\r\n      if (rating != 0) {\r\n        const newRating =\r\n          (productRating.peopleRated * productRating.rating + rating) /\r\n          (productRating.peopleRated + 1);\r\n        try {\r\n          await ProductsService.updateProduct({\r\n            id: productId,\r\n            rating: newRating,\r\n            peopleRated: productRating.peopleRated + 1,\r\n          });\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      }\r\n    },\r\n    async updateReview({ commit }, { review, newRating, newComment }) {\r\n      commit(\"DO_SOMETHING\");\r\n      try {\r\n        await ReviewService.updateReview({\r\n          id: review.id,\r\n          rating: newRating,\r\n          comment: newComment,\r\n          productId: review.ProductId,\r\n        });\r\n      } catch (error) {\r\n        console.log(error.response.data.error);\r\n      }\r\n      if (newRating != 0 && newRating != review.rating) {\r\n        var newRatingProduct, peopleRated;\r\n        if (review.rating == 0) {\r\n          peopleRated = review.Product.peopleRated + 1;\r\n          newRatingProduct =\r\n            (review.Product.peopleRated * review.Product.rating + newRating) /\r\n            peopleRated;\r\n        } else {\r\n          peopleRated = review.Product.peopleRated;\r\n          newRatingProduct =\r\n            (review.Product.peopleRated * review.Product.rating +\r\n              newRating -\r\n              review.rating) /\r\n            peopleRated;\r\n        }\r\n        try {\r\n          await ProductsService.updateProduct({\r\n            id: review.ProductId,\r\n            rating: newRatingProduct,\r\n            peopleRated: peopleRated,\r\n          });\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      }\r\n    },\r\n    async deleteReview({ commit }, review) {\r\n      commit(\"DO_SOMETHING\");\r\n      try {\r\n        await ReviewService.deleteReview(review.id);\r\n      } catch (error) {\r\n        console.log(error.response.data.error);\r\n      }\r\n      if (review.rating != 0) {\r\n        var newRatingProduct;\r\n        if (review.Product.peopleRated == 1) {\r\n          newRatingProduct = 0;\r\n        } else {\r\n          newRatingProduct =\r\n            (review.Product.peopleRated * review.Product.rating -\r\n              review.rating) /\r\n            (review.Product.peopleRated - 1);\r\n        }\r\n        try {\r\n          await ProductsService.updateProduct({\r\n            id: review.ProductId,\r\n            rating: newRatingProduct,\r\n            peopleRated: review.Product.peopleRated - 1,\r\n          });\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}