{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport WishlistService from \"@/services/WishlistService.js\";\nexport var WishlistModule = {\n  namespaced: true,\n  strict: true,\n  state: {\n    dataLoaded: false,\n    wishlist: []\n  },\n  mutations: {\n    SET_WISHLIST: function SET_WISHLIST(state, wishlist) {\n      state.wishlist = wishlist;\n    },\n    ADD_WISHLIST_ITEM: function ADD_WISHLIST_ITEM(state, wishlistItem) {\n      state.wishlist.unshift(wishlistItem);\n    },\n    REMOVE_WISHLIST_ITEM: function REMOVE_WISHLIST_ITEM(state, index) {\n      state.wishlist.splice(index, 1);\n    },\n    SET_DATA_LOADED: function SET_DATA_LOADED(state, dataLoaded) {\n      state.dataLoaded = dataLoaded;\n    }\n  },\n  actions: {\n    clearWishlist: function clearWishlist(_ref) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              commit(\"SET_WISHLIST\", []);\n              commit(\"SET_DATA_LOADED\", false);\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    setWishlist: function setWishlist(_ref2) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var state, commit, wishlist;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              state = _ref2.state, commit = _ref2.commit;\n              if (state.dataLoaded) {\n                _context2.next = 13;\n                break;\n              }\n              _context2.prev = 2;\n              _context2.next = 5;\n              return WishlistService.getWishlist();\n            case 5:\n              wishlist = _context2.sent.data;\n              commit(\"SET_WISHLIST\", wishlist);\n              commit(\"SET_DATA_LOADED\", true);\n              _context2.next = 13;\n              break;\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](2);\n              console.log(_context2.t0.response.data.error);\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[2, 10]]);\n      }))();\n    },\n    getWishlist: function getWishlist(_ref3) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var state, dispatch;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              state = _ref3.state, dispatch = _ref3.dispatch;\n              if (!(!state.dataLoaded && state.wishlist.length == 0)) {\n                _context3.next = 4;\n                break;\n              }\n              _context3.next = 4;\n              return dispatch(\"setWishlist\");\n            case 4:\n              return _context3.abrupt(\"return\", state.wishlist);\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }))();\n    },\n    getWishlistItem: function getWishlistItem(_ref4, productId) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var dispatch, wishlist, index;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              dispatch = _ref4.dispatch;\n              _context4.next = 3;\n              return dispatch(\"getWishlist\");\n            case 3:\n              wishlist = _context4.sent;\n              index = wishlist.findIndex(function (obj) {\n                return obj.ProductId == productId;\n              });\n              return _context4.abrupt(\"return\", index);\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }))();\n    },\n    addToWishlist: function addToWishlist(_ref5, productId) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var commit, dispatch, index, wishlistItem;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              commit = _ref5.commit, dispatch = _ref5.dispatch;\n              _context5.next = 3;\n              return dispatch(\"getWishlistItem\", productId);\n            case 3:\n              index = _context5.sent;\n              if (!(index == -1)) {\n                _context5.next = 24;\n                break;\n              }\n              _context5.prev = 5;\n              _context5.next = 8;\n              return WishlistService.createWishlistItem({\n                productId: productId\n              });\n            case 8:\n              _context5.next = 13;\n              break;\n            case 10:\n              _context5.prev = 10;\n              _context5.t0 = _context5[\"catch\"](5);\n              console.log(_context5.t0.response.data.error);\n            case 13:\n              _context5.prev = 13;\n              _context5.next = 16;\n              return WishlistService.getWishlistItem(productId);\n            case 16:\n              wishlistItem = _context5.sent.data;\n              commit(\"ADD_WISHLIST_ITEM\", wishlistItem);\n              return _context5.abrupt(\"return\", 0);\n            case 21:\n              _context5.prev = 21;\n              _context5.t1 = _context5[\"catch\"](13);\n              console.log(_context5.t1.response.data.error);\n            case 24:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[5, 10], [13, 21]]);\n      }))();\n    },\n    removeWishlistItem: function removeWishlistItem(_ref6, productId) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var commit, dispatch, index;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              commit = _ref6.commit, dispatch = _ref6.dispatch;\n              _context6.next = 3;\n              return dispatch(\"getWishlistItem\", productId);\n            case 3:\n              index = _context6.sent;\n              if (!(index != -1)) {\n                _context6.next = 15;\n                break;\n              }\n              _context6.prev = 5;\n              _context6.next = 8;\n              return WishlistService.removeWishlistItem(productId);\n            case 8:\n              commit(\"REMOVE_WISHLIST_ITEM\", index);\n              return _context6.abrupt(\"return\", -1);\n            case 12:\n              _context6.prev = 12;\n              _context6.t0 = _context6[\"catch\"](5);\n              console.log(_context6.t0.response.data.error);\n            case 15:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, null, [[5, 12]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["WishlistService","WishlistModule","namespaced","strict","state","dataLoaded","wishlist","mutations","SET_WISHLIST","ADD_WISHLIST_ITEM","wishlistItem","unshift","REMOVE_WISHLIST_ITEM","index","splice","SET_DATA_LOADED","actions","clearWishlist","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","commit","wrap","_callee$","_context","prev","next","stop","setWishlist","_ref2","_callee2","_callee2$","_context2","getWishlist","sent","data","t0","console","log","response","error","_ref3","_callee3","dispatch","_callee3$","_context3","length","abrupt","getWishlistItem","_ref4","productId","_callee4","_callee4$","_context4","findIndex","obj","ProductId","addToWishlist","_ref5","_callee5","_callee5$","_context5","createWishlistItem","t1","removeWishlistItem","_ref6","_callee6","_callee6$","_context6"],"sources":["C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/src/store/Wishlist.js"],"sourcesContent":["import WishlistService from \"@/services/WishlistService.js\";\r\nexport const WishlistModule = {\r\n  namespaced: true,\r\n  strict: true,\r\n  state: {\r\n    dataLoaded: false,\r\n    wishlist: [],\r\n  },\r\n  mutations: {\r\n    SET_WISHLIST(state, wishlist) {\r\n      state.wishlist = wishlist;\r\n    },\r\n    ADD_WISHLIST_ITEM(state, wishlistItem) {\r\n      state.wishlist.unshift(wishlistItem);\r\n    },\r\n    REMOVE_WISHLIST_ITEM(state, index) {\r\n      state.wishlist.splice(index, 1);\r\n    },\r\n    SET_DATA_LOADED(state, dataLoaded) {\r\n      state.dataLoaded = dataLoaded;\r\n    },\r\n  },\r\n  actions: {\r\n    async clearWishlist({ commit }) {\r\n      commit(\"SET_WISHLIST\", []);\r\n      commit(\"SET_DATA_LOADED\", false);\r\n    },\r\n    async setWishlist({ state, commit }) {\r\n      if (!state.dataLoaded) {\r\n        try {\r\n          const wishlist = (await WishlistService.getWishlist()).data;\r\n          commit(\"SET_WISHLIST\", wishlist);\r\n          commit(\"SET_DATA_LOADED\", true);\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      }\r\n    },\r\n    async getWishlist({ state, dispatch }) {\r\n      if (!state.dataLoaded && state.wishlist.length == 0) {\r\n        await dispatch(\"setWishlist\");\r\n      }\r\n      return state.wishlist;\r\n    },\r\n    async getWishlistItem({ dispatch }, productId) {\r\n      const wishlist = await dispatch(\"getWishlist\");\r\n      const index = wishlist.findIndex((obj) => obj.ProductId == productId);\r\n      return index;\r\n    },\r\n    async addToWishlist({ commit, dispatch }, productId) {\r\n      const index = await dispatch(\"getWishlistItem\", productId);\r\n      if (index == -1) {\r\n        try {\r\n          await WishlistService.createWishlistItem({\r\n            productId: productId,\r\n          });\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n        try {\r\n          const wishlistItem = (\r\n            await WishlistService.getWishlistItem(productId)\r\n          ).data;\r\n          commit(\"ADD_WISHLIST_ITEM\", wishlistItem);\r\n          return 0;\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      }\r\n    },\r\n    async removeWishlistItem({ commit, dispatch }, productId) {\r\n      const index = await dispatch(\"getWishlistItem\", productId);\r\n      if (index != -1) {\r\n        try {\r\n          await WishlistService.removeWishlistItem(productId);\r\n          commit(\"REMOVE_WISHLIST_ITEM\", index);\r\n          return -1;\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}