{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport TopHeader from \"@/components/Common/TopHeader.vue\";\nimport AddToWishlist from \"@/components/MaintainProduct/AddToWishlist.vue\";\nimport MyFooter from \"@/components/Common/MyFooter.vue\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"MyCart\",\n  components: {\n    TopHeader: TopHeader,\n    AddToWishlist: AddToWishlist,\n    MyFooter: MyFooter\n  },\n  data: function data() {\n    return {\n      selectedcurrency: \"TND\"\n    };\n  },\n  mounted: function mounted() {},\n  computed: _objectSpread(_objectSpread({}, mapState({\n    cartProducts: function cartProducts(state) {\n      return state.Cart.cartProducts;\n    }\n  })), {}, {\n    cartItemCount: function cartItemCount() {\n      return this.cartProducts.length;\n    },\n    totalamount: function totalamount() {\n      var i,\n        amount = 0;\n      for (i = 0; i < this.cartProducts.length; i++) {\n        amount += this.cartProducts[i].amount * this.cartProducts[i].quantity;\n      }\n      return amount;\n    }\n  }),\n  methods: {\n    resetCart: function resetCart() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.cartProducts = [];\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    quantityInc: function quantityInc(product) {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this2.$store.dispatch(\"Cart/updateCartItemQuantity\", {\n                productId: product.productId,\n                quantity: product.quantity + 1\n              });\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    quantityDec: function quantityDec(product) {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(product.quantity > 1)) {\n                _context3.next = 3;\n                break;\n              }\n              _context3.next = 3;\n              return _this3.$store.dispatch(\"Cart/updateCartItemQuantity\", {\n                productId: product.productId,\n                quantity: product.quantity - 1\n              });\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }))();\n    },\n    removeCartItem: function removeCartItem(product) {\n      var _this4 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var itemIndex;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _this4.$store.dispatch(\"Cart/removeCartItem\", product.productId);\n            case 2:\n              itemIndex = _context4.sent;\n              if (itemIndex == -1) {\n                _this4.$bvToast.toast(\"Produit retiré du chariot\", {\n                  title: \"Chariot\",\n                  variant: \"success\",\n                  toaster: \"b-toaster-top-center\",\n                  noCloseButton: false,\n                  solid: true\n                });\n              }\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["TopHeader","AddToWishlist","MyFooter","mapState","name","components","data","selectedcurrency","mounted","computed","_objectSpread","cartProducts","state","Cart","cartItemCount","length","totalamount","i","amount","quantity","methods","resetCart","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","stop","quantityInc","product","_this2","_callee2","_callee2$","_context2","$store","dispatch","productId","quantityDec","_this3","_callee3","_callee3$","_context3","removeCartItem","_this4","_callee4","itemIndex","_callee4$","_context4","sent","$bvToast","toast","title","variant","toaster","noCloseButton","solid"],"sources":["src/views/UsersProduct/CartView.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <TopHeader></TopHeader>\r\n      <b-container class=\"mt-3\">\r\n        <b-row>\r\n          <b-col class=\"text-center\">\r\n            <h2>Chariot</h2>\r\n            <hr />\r\n          </b-col>\r\n        </b-row>\r\n        <b-row v-if=\"cartItemCount == 0\">\r\n          <b-col>\r\n            Chariot Vide!\r\n            <hr />\r\n          </b-col>\r\n        </b-row>\r\n        <div v-if=\"cartItemCount != 0\">\r\n          \r\n          <b-row>\r\n            <b-col cols=\"3\" />\r\n            <b-col cols=\"3\">\r\n              <strong>Article</strong>\r\n            </b-col>\r\n            <b-col cols=\"2\">\r\n              <strong>Prix</strong>\r\n            </b-col>\r\n            <b-col cols=\"4\">\r\n              <strong>Quantité</strong>\r\n            </b-col>\r\n          </b-row>\r\n          <hr />\r\n        </div>\r\n        <div v-for=\"product in cartProducts\" :key=\"product.productId\">\r\n          <b-row>\r\n            <b-col cols=\"3\" class=\"text-center\">\r\n              <b-img style=\"max-width: 66%\" :src=\"product.image\" alt=\"No Image\" />\r\n            </b-col>\r\n            <b-col cols=\"3\">\r\n              <b-link :to=\"`/product/${product.productId}`\">\r\n                {{ product.title }}\r\n              </b-link>\r\n              <b-row class=\"mt-2\" align-v=\"center\">\r\n                <b-col>\r\n                  <b-form-rating\r\n                    :precision=\"\r\n                      Math.round(product.rating) == product.rating ? 0 : 1\r\n                    \"\r\n                    size=\"sm\"\r\n                    readonly\r\n                    show-value\r\n                    show-value-max\r\n                    :value=\"product.rating\"\r\n                    variant=\"primary\"\r\n                  />\r\n                </b-col>\r\n              </b-row>\r\n              <AddToWishlist\r\n                class=\"mt-2\"\r\n                addButtonTitle=\"Enregistrer\"\r\n                addedButtonTitle=\"Enregistré\"\r\n                buttonType=\"sm\"\r\n                :productId=\"product.productId\"\r\n              />\r\n            </b-col>\r\n            <b-col cols=\"2\">\r\n              {{ product.amount * product.quantity }}\r\n              {{ product.currency }}</b-col\r\n            >\r\n            <b-col cols=\"4\">\r\n              <div>\r\n                <b-button\r\n                  size=\"sm\"\r\n                  variant=\"primary\"\r\n                  @click=\"quantityInc(product)\"\r\n                  >+\r\n                </b-button>\r\n                <a class=\"ml-4\">{{ product.quantity }}</a>\r\n                <b-button\r\n                  size=\"sm\"\r\n                  variant=\"warning\"\r\n                  class=\"ml-4\"\r\n                  @click=\"quantityDec(product)\"\r\n                  >-\r\n                </b-button>\r\n                <b-button\r\n                  size=\"sm\"\r\n                  class=\"ml-5\"\r\n                  @click=\"removeCartItem(product)\"\r\n                  variant=\"danger\"\r\n                >\r\n                  retirer\r\n                </b-button>\r\n              </div>\r\n            </b-col>\r\n          </b-row>\r\n          <hr />\r\n        </div>\r\n        <div v-if=\"cartItemCount != 0\">\r\n          <b-row class=\"mb-3\">\r\n            <b-col cols=\"10\" />\r\n            <b-col cols=\"2\">\r\n              <b-card>\r\n                <b-card-title>Total</b-card-title>\r\n                <b-card-text\r\n                  >{{ totalamount }} {{ selectedcurrency }}</b-card-text\r\n                >\r\n              </b-card>\r\n            </b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col cols=\"2\">\r\n              <b-button block variant=\"info\" to=\"/products\">Ajouter Plus</b-button>\r\n            </b-col>\r\n            <b-col cols=\"8\" />\r\n            <b-col cols=\"2\">\r\n              <b-button to=\"/checkout\"  @click=\"resetCart()\"  block variant=\"primary\">\r\n                <b-icon icon=\"cursor-fill\" />\r\n                Acheter\r\n              </b-button>\r\n            </b-col>\r\n          </b-row>\r\n        </div>\r\n      </b-container>\r\n      <MyFooter class=\"mt-5\" />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import TopHeader from \"@/components/Common/TopHeader.vue\";\r\n  import AddToWishlist from \"@/components/MaintainProduct/AddToWishlist.vue\";\r\n  import MyFooter from \"@/components/Common/MyFooter.vue\";\r\n  import { mapState } from \"vuex\";\r\n  export default {\r\n    name: \"MyCart\",\r\n    components: {\r\n      TopHeader,\r\n      AddToWishlist,\r\n      MyFooter,\r\n    },\r\n    data() {\r\n      return {\r\n        \r\n      \r\n        selectedcurrency: \"TND\",\r\n      };\r\n    },\r\n    mounted() {},\r\n    computed: {\r\n        \r\n      ...mapState({\r\n        cartProducts: (state) => state.Cart.cartProducts,\r\n      }),\r\n      cartItemCount() {\r\n        return this.cartProducts.length;\r\n      },\r\n      totalamount() {\r\n        var i,\r\n          amount = 0;\r\n        for (i = 0; i < this.cartProducts.length; i++) {\r\n          amount += this.cartProducts[i].amount * this.cartProducts[i].quantity;\r\n        }\r\n        return amount;\r\n      },\r\n    },\r\n    methods: {\r\n      async resetCart() {\r\n       \r\n        this.cartProducts=[];\r\n      },\r\n      async quantityInc(product) {\r\n        await this.$store.dispatch(\"Cart/updateCartItemQuantity\", {\r\n          productId: product.productId,\r\n          quantity: product.quantity + 1,\r\n        });\r\n      },\r\n      async quantityDec(product) {\r\n        if (product.quantity > 1) {\r\n          await this.$store.dispatch(\"Cart/updateCartItemQuantity\", {\r\n            productId: product.productId,\r\n            quantity: product.quantity - 1,\r\n          });\r\n        }\r\n      },\r\n     \r\n      async removeCartItem(product) {\r\n        const itemIndex = await this.$store.dispatch(\r\n          \"Cart/removeCartItem\",\r\n          product.productId\r\n        );\r\n        if (itemIndex == -1) {\r\n          this.$bvToast.toast(\"Produit retiré du chariot\", {\r\n            title: \"Chariot\",\r\n            variant: \"success\",\r\n            toaster: \"b-toaster-top-center\",\r\n            noCloseButton: false,\r\n            solid: true,\r\n          });\r\n        }\r\n      },\r\n    },\r\n   \r\n  };\r\n  </script> \r\n  \r\n  <style scoped lang=\"scss\"></style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}