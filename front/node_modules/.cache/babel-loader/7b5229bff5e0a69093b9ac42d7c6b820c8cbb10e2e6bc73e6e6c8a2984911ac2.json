{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport OrderItemService from \"@/services/OrderItemService.js\";\nimport OrderService from \"@/services/OrderService.js\";\nexport default {\n  name: \"OrderItems\",\n  props: {\n    orderItems: {\n      type: Array,\n      required: true\n    },\n    orderInfo: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {},\n  data: function data() {\n    return {\n      orderStatus: this.orderInfo.status,\n      statusVariant: this.orderInfo.variant,\n      allStatus: [{\n        name: \"en cours\",\n        variant: \"info\"\n      }, {\n        name: \"en chemin\",\n        variant: \"warning\"\n      }, {\n        name: \"complète\",\n        variant: \"success\"\n      }]\n    };\n  },\n  mounted: function mounted() {},\n  methods: {\n    updateStatus: function updateStatus(status) {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this.orderStatus = status.name;\n              _this.statusVariant = status.variant;\n              _context.prev = 2;\n              _context.next = 5;\n              return OrderService.updateOrder({\n                id: _this.orderInfo.id,\n                status: status.name,\n                variant: status.variant\n              });\n            case 5:\n              _context.next = 10;\n              break;\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0.response.data.error);\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 7]]);\n      }))();\n    },\n    deleteOrder: function deleteOrder() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var i;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = _regeneratorRuntime().keys(_this2.orderItems);\n            case 1:\n              if ((_context2.t1 = _context2.t0()).done) {\n                _context2.next = 13;\n                break;\n              }\n              i = _context2.t1.value;\n              _context2.prev = 3;\n              _context2.next = 6;\n              return OrderItemService.deleteOrderItem(_this2.orderItems[i].id);\n            case 6:\n              _context2.next = 11;\n              break;\n            case 8:\n              _context2.prev = 8;\n              _context2.t2 = _context2[\"catch\"](3);\n              console.log(_context2.t2.response.data.error);\n            case 11:\n              _context2.next = 1;\n              break;\n            case 13:\n              _context2.prev = 13;\n              _context2.next = 16;\n              return OrderService.deleteOrder(_this2.orderInfo.id);\n            case 16:\n              _context2.next = 21;\n              break;\n            case 18:\n              _context2.prev = 18;\n              _context2.t3 = _context2[\"catch\"](13);\n              console.log(_context2.t3.response.data.error);\n            case 21:\n              _this2.$router.push({\n                path: \"/admin/orders\"\n              });\n            case 22:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[3, 8], [13, 18]]);\n      }))();\n    }\n  },\n  computed: {}\n};","map":{"version":3,"names":["OrderItemService","OrderService","name","props","orderItems","type","Array","required","orderInfo","Object","components","data","orderStatus","status","statusVariant","variant","allStatus","mounted","methods","updateStatus","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","updateOrder","id","t0","console","log","response","error","stop","deleteOrder","_this2","_callee2","i","_callee2$","_context2","keys","t1","done","value","deleteOrderItem","t2","t3","$router","push","path","computed"],"sources":["src/components/Admins/Order/OrderItems.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <b-row>\r\n        <b-col cols=\"6\" v-for=\"orderItem in orderItems\" :key=\"orderItem.id\">\r\n          <b-card-group deck>\r\n            <b-card img-top style=\"max-width: 14rem\" class=\"mb-4\">\r\n              <b-card-img\r\n                :src=\"orderItem.Product.image1\"\r\n                style=\"max-width: 14rem; max-height: 14rem\"\r\n                alt=\"Image Not Found\"\r\n              />\r\n              <br />\r\n              <b-link :to=\"{ path: `/product/${orderItem.Product.id}` }\">\r\n                {{ orderItem.Product.title }}\r\n              </b-link>\r\n              <br />\r\n              <small class=\"mt-2\">\r\n                Price: {{ orderItem.Product.amount }}\r\n                {{ orderItem.Product.currency }}\r\n              </small>\r\n              <br />\r\n              <small class=\"mt-2\">Quantité: {{ orderItem.quantity }}</small>\r\n              <br />\r\n              <small class=\"mt-2\">\r\n                Cost: {{ orderItem.Product.amount * orderItem.quantity }}\r\n                {{ orderItem.Product.currency }}\r\n              </small>\r\n            </b-card>\r\n          </b-card-group>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <h5 class=\"font-weight-bold\">État de mise à jour</h5>\r\n          <hr />\r\n          <b-row>\r\n            <b-col cols=\"5\">\r\n              <b-dropdown\r\n                id=\"dropdown-left\"\r\n                :text=\"orderStatus\"\r\n                block\r\n                :variant=\"statusVariant\"\r\n              >\r\n                <b-dropdown-item\r\n                  v-for=\"(status, idx) in allStatus\"\r\n                  :key=\"idx\"\r\n                  @click=\"updateStatus(status)\"\r\n                >\r\n                  {{ status.name }}\r\n                </b-dropdown-item>\r\n              </b-dropdown>\r\n            </b-col>\r\n          </b-row>\r\n         \r\n        </b-col>\r\n      </b-row>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import OrderItemService from \"@/services/OrderItemService.js\";\r\n  import OrderService from \"@/services/OrderService.js\";\r\n  export default {\r\n    name: \"OrderItems\",\r\n    props: {\r\n      orderItems: {\r\n        type: Array,\r\n        required: true,\r\n      },\r\n      orderInfo: {\r\n        type: Object,\r\n        required: true,\r\n      },\r\n    },\r\n    components: {},\r\n    data() {\r\n      return {\r\n        orderStatus: this.orderInfo.status,\r\n        statusVariant: this.orderInfo.variant,\r\n        allStatus: [\r\n         \r\n          {\r\n            name: \"en cours\",\r\n            variant: \"info\",\r\n          },\r\n          {\r\n            name: \"en chemin\",\r\n            variant: \"warning\",\r\n          },\r\n          {\r\n            name: \"complète\",\r\n            variant: \"success\",\r\n          },\r\n        ],\r\n      };\r\n    },\r\n    mounted() {},\r\n    methods: {\r\n      async updateStatus(status) {\r\n        this.orderStatus = status.name;\r\n        this.statusVariant = status.variant;\r\n        try {\r\n          await OrderService.updateOrder({\r\n            id: this.orderInfo.id,\r\n            status: status.name,\r\n            variant: status.variant,\r\n          });\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      },\r\n      async deleteOrder() {\r\n        for (var i in this.orderItems) {\r\n          try {\r\n            await OrderItemService.deleteOrderItem(this.orderItems[i].id);\r\n          } catch (error) {\r\n            console.log(error.response.data.error);\r\n          }\r\n        }\r\n        try {\r\n          await OrderService.deleteOrder(this.orderInfo.id);\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n        this.$router.push({ path: \"/admin/orders\" });\r\n      },\r\n    },\r\n    computed: {},\r\n  };\r\n  </script>\r\n  \r\n  <style lang=\"scss\" scoped></style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}