{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport AddToCart from \"@/components/MaintainProduct/AddToCart.vue\";\nimport AddToWishlist from \"@/components/MaintainProduct/AddToWishlist.vue\";\nimport ProductsService from \"@/services/ProductsService.js\";\nimport WishlistService from \"@/services/WishlistService.js\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"ProductList\",\n  props: {},\n  components: {\n    AddToWishlist: AddToWishlist,\n    AddToCart: AddToCart\n  },\n  data: function data() {\n    return {\n      admin: false,\n      supplier: false,\n      wishlistKey: 4,\n      currentPage: 1,\n      cartComponentKey: 2,\n      productLimit: 8,\n      displayProducts: []\n    };\n  },\n  computed: _objectSpread({}, mapState({\n    displayProducts1: function displayProducts1(state) {\n      return state.Products.displayProducts;\n    },\n    apCount: function apCount(state) {\n      return state.Products.apCount;\n    },\n    perPage: function perPage(state) {\n      return state.Products.perPage;\n    }\n  })),\n  mounted: function mounted() {\n    var _this = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _this.admin = _this.$store.state.CurrentUser.admin;\n            _this.supplier = _this.$store.state.CurrentUser.supplier;\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    refreshCartBtn: function refreshCartBtn() {\n      this.cartComponentKey += 1;\n      this.wishlistKey += 1;\n    },\n    deleteProduct: function deleteProduct(product) {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return WishlistService.deleteWishItemByProduct(product.id);\n            case 2:\n              _context2.next = 4;\n              return ProductsService.deleteProduct(product.id);\n            case 4:\n              _context2.next = 6;\n              return _this2.$store.dispatch(\"Products/setAllBackupProducts\");\n            case 6:\n              _context2.next = 8;\n              return _this2.$store.dispatch(\"Wishlist/setWishlist\");\n            case 8:\n              window.location.reload();\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    paginate: function paginate(currentPage) {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _this3.$store.dispatch(\"Products/paginate\", currentPage);\n            case 2:\n              _this3.refreshCartBtn();\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["AddToCart","AddToWishlist","ProductsService","WishlistService","mapState","name","props","components","data","admin","supplier","wishlistKey","currentPage","cartComponentKey","productLimit","displayProducts","computed","_objectSpread","displayProducts1","state","Products","apCount","perPage","mounted","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$store","CurrentUser","stop","methods","refreshCartBtn","deleteProduct","product","_this2","_callee2","_callee2$","_context2","deleteWishItemByProduct","id","dispatch","window","location","reload","paginate","_this3","_callee3","_callee3$","_context3"],"sources":["src/components/Products/ProductList.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n      <div class=\"w-[1190px] mx-auto my-auto\">\r\n  <div class=\"flex flex-col w-full h-auto mt-[3%]\">\r\n    <div class=\"flex flex-wrap\">\r\n     \r\n      <b-row>\r\n        <b-col cols=\"4\" v-for=\"product in displayProducts1\" :key=\"product.id\">\r\n          <b-card-group deck  style =\"height: 500px;  \">\r\n            <b-card img-top style=\"max-width: 25rem\" class=\"mb-4\">\r\n              <b-card-img\r\n              style =\"height: 300px; \"\r\n                @click=\"$router.push({ path: `/product/${product.id}` })\"\r\n                :src=\"product.image1\"\r\n                alt=\"Image Not Found\"\r\n              />\r\n              <div class=\"mt-2\">\r\n                <b-link :to=\"`/product/${product.id}`\">\r\n                  {{ product.title }}\r\n                </b-link>\r\n              </div>\r\n              <h6 class=\"mt-1\">\r\n                Prix: {{ product.amount }} {{ product.currency }}\r\n              </h6>\r\n              <b-row class=\"mt-2\" align-v=\"center\">\r\n                <b-col cols=\"12\">\r\n                  <b-form-rating\r\n                    :precision=\"\r\n                      Math.round(product.rating) == product.rating ? 0 : 1\r\n                    \"\r\n                    size=\"sm\"\r\n                    show-value\r\n                    show-value-max\r\n                    readonly\r\n                    :value=\"product.rating\"\r\n                    variant=\"primary\"\r\n                  />\r\n                </b-col>\r\n              </b-row>\r\n              <div class=\"d-flex justify-content-between\">\r\n                <AddToCart\r\n                  class=\"mt-2\"\r\n                  addButtonTitle=\"Ajouter au chariot\"\r\n                  addedButtonTitle=\"dans chariot\"\r\n                  :key=\"cartComponentKey\"\r\n                  buttonType=\"sm\"\r\n                  :productId=\"product.id\"\r\n                  :rating=\"product.rating\"\r\n                  :currency=\"product.currency\"\r\n                  :image=\"product.image1\"\r\n                  :title=\"product.title\"\r\n                  :amount=\"product.amount\"\r\n                />\r\n                <AddToWishlist\r\n                  class=\"mt-2\"\r\n                  addButtonTitle=\"Enregistrer\"\r\n                  addedButtonTitle=\"Enregistré\"\r\n                  :key=\"wishlistKey\"\r\n                  buttonType=\"sm\"\r\n                  :productId=\"product.id\"\r\n                />\r\n              </div>\r\n              <b-button\r\n                v-if=\"admin\"\r\n                class=\"mt-2\"\r\n                @click=\"deleteProduct(product)\"\r\n                size=\"sm\"\r\n                variant=\"danger\"\r\n              >\r\n                <b-icon icon=\"trash\" />\r\n                Supprimer\r\n              </b-button>\r\n              <b-button\r\n                v-if=\"supplier\"\r\n                class=\"mt-2\"\r\n                @click=\"deleteProduct(product)\"\r\n                size=\"sm\"\r\n                variant=\"danger\"\r\n              >\r\n                <b-icon icon=\"trash\" />\r\n                Supprimer\r\n              </b-button>\r\n            </b-card>\r\n          </b-card-group>\r\n        </b-col>\r\n      </b-row>\r\n\r\n\r\n\r\n\r\n      <b-row class=\"mt-3 mb-5\" v-if=\"this.apCount == 0\">\r\n        <b-col>\r\n          <h2>...</h2>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row v-if=\"this.apCount != 0\" class=\"mt-3\" align-v=\"center\">\r\n        <b-col>\r\n          <b-pagination\r\n            size=\"\"\r\n            v-model=\"currentPage\"\r\n            :total-rows=\"apCount\"\r\n            :per-page=\"perPage\"\r\n            @input=\"paginate(currentPage)\"\r\n          ></b-pagination>\r\n        </b-col>\r\n        <b-col />\r\n        <b-col>\r\n          <h6>\r\n          MONTRANT {{ (currentPage - 1) * perPage + 1 }} à\r\n            {{\r\n              currentPage * perPage > apCount ? apCount : currentPage * perPage\r\n            }}\r\n            de {{ apCount }} ({{ Math.ceil(apCount / perPage) }}\r\n            PAGES)\r\n          </h6>\r\n        </b-col>\r\n      </b-row>\r\n\r\n    </div>\r\n\r\n  </div>\r\n  <\r\n\r\n\r\n   \r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import AddToCart from \"@/components/MaintainProduct/AddToCart.vue\";\r\n  import AddToWishlist from \"@/components/MaintainProduct/AddToWishlist.vue\";\r\n  import ProductsService from \"@/services/ProductsService.js\";\r\n  import WishlistService from \"@/services/WishlistService.js\";\r\n  import { mapState } from \"vuex\";\r\n  export default {\r\n    name: \"ProductList\",\r\n    props: {},\r\n    components: {\r\n      AddToWishlist,\r\n      AddToCart,\r\n    },\r\n    data() {\r\n      return {\r\n        admin: false,\r\n        supplier: false,\r\n        wishlistKey: 4,\r\n        currentPage: 1,\r\n        cartComponentKey: 2,\r\n        productLimit: 8,\r\n        displayProducts:[],\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapState({\r\n        displayProducts1: (state) => state.Products.displayProducts,\r\n        apCount: (state) => state.Products.apCount,\r\n        perPage: (state) => state.Products.perPage,\r\n      }),\r\n    },\r\n   async mounted() {\r\n      this.admin = this.$store.state.CurrentUser.admin;\r\n      this.supplier = this.$store.state.CurrentUser.supplier;\r\n     \r\n    },\r\n    methods: {\r\n      refreshCartBtn() {\r\n        this.cartComponentKey += 1;\r\n        this.wishlistKey += 1;\r\n      },\r\n      async deleteProduct(product) {\r\n        await WishlistService.deleteWishItemByProduct(product.id);\r\n        await ProductsService.deleteProduct(product.id);\r\n        await this.$store.dispatch(\"Products/setAllBackupProducts\");\r\n        await this.$store.dispatch(\"Wishlist/setWishlist\");\r\n        window.location.reload();\r\n      },\r\n      async paginate(currentPage) {\r\n        await this.$store.dispatch(\"Products/paginate\", currentPage);\r\n        this.refreshCartBtn();\r\n      },\r\n    },\r\n     \r\n  };\r\n  \r\n   \r\n </script>\r\n  \r\n  <style lang=\"scss\" scoped></style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}