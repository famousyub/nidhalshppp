{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport ProductsService from \"@/services/ProductsService.js\";\nimport CategoryService from \"@/services/CategoryService.js\";\nimport SubCategoryService from \"@/services/SubCategoryService.js\";\nimport SubSubCategoryService from \"@/services/SubSubCategoryService.js\";\nimport ATopHeader from \"@/components/Admins/ATopHeader.vue\";\nimport MyFooter from \"@/components/Common/MyFooter.vue\";\nimport { VueEditor } from \"vue2-editor\";\nexport default {\n  name: \"AddProduct\",\n  components: {\n    ATopHeader: ATopHeader,\n    VueEditor: VueEditor,\n    MyFooter: MyFooter\n  },\n  data: function data() {\n    return {\n      images: [],\n      newCategoryName: \"\",\n      newSubCategoryName: \"\",\n      newSubSubCategoryName: \"\",\n      categoryList: [],\n      subCategoryList: [],\n      subSubCategoryList: [],\n      productCategoryMessage: \"Sélectionnez la catégorie de produit.\",\n      productCategoryAlert: false,\n      productSubTitleMessage: \"Ajouter un sous titre du produit.\",\n      productSubTitleAlert: false,\n      productDescriptionMessage: \"Ajoutez une description appropriée pour ce produit.\",\n      productDescriptionAlert: false,\n      selectedCategory: \"Nom de catégorie\",\n      selectedSubCategory: \"Nom de sous-catégorie\",\n      selectedSubSubCategory: \"Nom de sous-sous-catégorie\",\n      backupProduct: null,\n      product: {\n        code: \"\",\n        title: \"\",\n        amount: null,\n        sales: 0,\n        subtitle: \"\",\n        rating: 0,\n        peopleRated: 0,\n        description: \"\",\n        currency: \"TND\",\n        CategoryId: 0,\n        SubCategoryId: 0,\n        SubSubCategoryId: 0\n      },\n      errorCountImage: \"Vous n'êtes pas autorisé à ajouter plus de 10 images pour un produit.\",\n      maximumImageCount: 10,\n      imageAlert: false,\n      dispImg: []\n    };\n  },\n  computed: {},\n  mounted: function mounted() {\n    var _this = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _this.backupProduct = _this.product;\n            _context.next = 3;\n            return _this.$store.dispatch(\"Category/getCategoryList\");\n          case 3:\n            _this.categoryList = _context.sent.slice();\n            _context.next = 6;\n            return _this.$store.dispatch(\"Category/getSubCategoryList\");\n          case 6:\n            _this.subCategoryList = _context.sent.slice();\n            _context.next = 9;\n            return _this.$store.dispatch(\"Category/getSubSubCategoryList\");\n          case 9:\n            _this.subSubCategoryList = _context.sent.slice();\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    resetProduct: function resetProduct() {\n      this.product = this.backupProduct;\n    },\n    createNewProduct: function createNewProduct() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var formData, fieldName, i, newProduct;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(_this2.product.CategoryId == 0 || _this2.product.SubCategoryId == 0 || _this2.product.SubSubCategoryId == 0)) {\n                _context2.next = 5;\n                break;\n              }\n              _this2.productCategoryAlert = true;\n              return _context2.abrupt(\"return\");\n            case 5:\n              if (!(_this2.product.subtitle == \"\")) {\n                _context2.next = 10;\n                break;\n              }\n              _this2.productSubTitleAlert = true;\n              return _context2.abrupt(\"return\");\n            case 10:\n              if (!(_this2.product.description == \"\")) {\n                _context2.next = 14;\n                break;\n              }\n              _this2.productSubTitleAlert = false;\n              _this2.productDescriptionAlert = true;\n              return _context2.abrupt(\"return\");\n            case 14:\n              _this2.product.subtitle = _this2.product.subtitle.replace(/<p><br><\\/p>/g, \"\");\n              _this2.product.description = _this2.product.description.replace(/<p><br><\\/p>/g, \"\");\n              formData = new FormData();\n              for (fieldName in _this2.product) {\n                formData.append(fieldName, _this2.product[fieldName]);\n              }\n              for (i = 0; i < _this2.images.length; i++) {\n                if (i < _this2.maximumImageCount) formData.append(\"imageField\", _this2.images[i]);\n              }\n              _context2.prev = 19;\n              _context2.next = 22;\n              return ProductsService.createProduct(formData);\n            case 22:\n              newProduct = _context2.sent.data;\n              _context2.next = 25;\n              return _this2.$store.dispatch(\"Products/setAllBackupProducts\");\n            case 25:\n              _this2.$router.push({\n                path: \"/product/\".concat(newProduct.id)\n              });\n              _context2.next = 31;\n              break;\n            case 28:\n              _context2.prev = 28;\n              _context2.t0 = _context2[\"catch\"](19);\n              console.log(_context2.t0.response.data.error);\n            case 31:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[19, 28]]);\n      }))();\n    },\n    createNewCateg: function createNewCateg() {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var newCategory;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return CategoryService.createCategory({\n                name: _this3.newCategoryName\n              });\n            case 3:\n              newCategory = _context3.sent.data;\n              _this3.newCategoryName = \"\";\n              _context3.next = 7;\n              return _this3.$store.dispatch(\"Category/setCategoryList\");\n            case 7:\n              _this3.categoryList.push(newCategory);\n              _context3.next = 13;\n              break;\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0.response.data.error);\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 10]]);\n      }))();\n    },\n    createNewSubCateg: function createNewSubCateg() {\n      var _this4 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var newSubCategory;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return SubCategoryService.createSubCategory({\n                name: _this4.newSubCategoryName,\n                CategoryId: _this4.product.CategoryId\n              });\n            case 3:\n              newSubCategory = _context4.sent.data;\n              _this4.newSubCategoryName = \"\";\n              _context4.next = 7;\n              return _this4.$store.dispatch(\"Category/setSubCategoryList\");\n            case 7:\n              _this4.subCategoryList.push(newSubCategory);\n              _context4.next = 13;\n              break;\n            case 10:\n              _context4.prev = 10;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(_context4.t0.response.data.error);\n            case 13:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[0, 10]]);\n      }))();\n    },\n    createNewSubSubCateg: function createNewSubSubCateg() {\n      var _this5 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var newSubSubCategory;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              _context5.next = 3;\n              return SubSubCategoryService.createSubSubCategory({\n                name: _this5.newSubSubCategoryName,\n                SubCategoryId: _this5.product.SubCategoryId\n              });\n            case 3:\n              newSubSubCategory = _context5.sent.data;\n              _this5.newSubSubCategoryName = \"\";\n              _context5.next = 7;\n              return _this5.$store.dispatch(\"Category/setSubSubCategoryList\");\n            case 7:\n              _this5.subSubCategoryList.push(newSubSubCategory);\n              _context5.next = 13;\n              break;\n            case 10:\n              _context5.prev = 10;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.log(_context5.t0.response.data.error);\n            case 13:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, null, [[0, 10]]);\n      }))();\n    },\n    set_category: function set_category(category) {\n      this.selectedCategory = category.name;\n      this.selectedSubCategory = \"Sub Category\";\n      this.selectedSubSubCategory = \"Sub Sub Category\";\n      this.product.SubCategoryId = 0, this.product.SubSubCategoryId = 0, this.product.CategoryId = category.id;\n    },\n    set_subCategory: function set_subCategory(subCategory) {\n      this.selectedSubCategory = subCategory.name;\n      this.selectedSubSubCategory = \"Sub Sub Category\";\n      this.product.SubCategoryId = subCategory.id;\n      this.product.SubSubCategoryId = 0;\n    },\n    set_subSubCategory: function set_subSubCategory(subSubCategory) {\n      this.productCategoryAlert = false;\n      this.selectedSubSubCategory = subSubCategory.name;\n      this.product.SubSubCategoryId = subSubCategory.id;\n    },\n    selectedImage: function selectedImage(event) {\n      this.images = event.target.files;\n      if (this.images.length > this.maximumImageCount) {\n        this.imageAlert = true;\n      } else {\n        this.imageAlert = false;\n      }\n      var i;\n      this.dispImg = [];\n      for (i = 0; i < this.images.length; i++) {\n        if (i < this.maximumImageCount) {\n          this.dispImg[i] = URL.createObjectURL(this.images[i]);\n        }\n      }\n    },\n    addedProduct: function addedProduct() {\n      var _this6 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _this6.$bvToast.toast(\"cette entreprise a ajouté un produit avec succès \", {\n                title: \"Ajouté\",\n                variant: \"success\",\n                toaster: \"b-toaster-top-center\",\n                noCloseButton: false,\n                solid: true\n              });\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["ProductsService","CategoryService","SubCategoryService","SubSubCategoryService","ATopHeader","MyFooter","VueEditor","name","components","data","images","newCategoryName","newSubCategoryName","newSubSubCategoryName","categoryList","subCategoryList","subSubCategoryList","productCategoryMessage","productCategoryAlert","productSubTitleMessage","productSubTitleAlert","productDescriptionMessage","productDescriptionAlert","selectedCategory","selectedSubCategory","selectedSubSubCategory","backupProduct","product","code","title","amount","sales","subtitle","rating","peopleRated","description","currency","CategoryId","SubCategoryId","SubSubCategoryId","errorCountImage","maximumImageCount","imageAlert","dispImg","computed","mounted","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$store","dispatch","sent","slice","stop","methods","resetProduct","createNewProduct","_this2","_callee2","formData","fieldName","i","newProduct","_callee2$","_context2","abrupt","replace","FormData","append","length","createProduct","$router","push","path","concat","id","t0","console","log","response","error","createNewCateg","_this3","_callee3","newCategory","_callee3$","_context3","createCategory","createNewSubCateg","_this4","_callee4","newSubCategory","_callee4$","_context4","createSubCategory","createNewSubSubCateg","_this5","_callee5","newSubSubCategory","_callee5$","_context5","createSubSubCategory","set_category","category","set_subCategory","subCategory","set_subSubCategory","subSubCategory","selectedImage","event","target","files","URL","createObjectURL","addedProduct","_this6","_callee6","_callee6$","_context6","$bvToast","toast","variant","toaster","noCloseButton","solid"],"sources":["src/views/Admin/AddProduct.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <ATopHeader />\r\n  \r\n      <b-container class=\"mt-4\">\r\n        <b-card>\r\n          <b-navbar text-variant=\"white\" variant=\"info\">\r\n            <b-navbar-brand style=\"color: #fff\">Ajouter un produit</b-navbar-brand>\r\n          </b-navbar>\r\n          <b-form\r\n            @reset=\"resetProduct\"\r\n            @submit.stop.prevent=\"createNewProduct\"\r\n            class=\"mt-3\"\r\n          >\r\n            <b-row cols=\"1\" cols-md=\"2\">\r\n              <b-col>\r\n                <b-form-group\r\n                  id=\"input-group-title\"\r\n                  label=\"Nom Produit \"\r\n                  label-for=\"input-title\"\r\n                >\r\n                  <b-form-input\r\n                    id=\"input-title\"\r\n                    v-model=\"product.title\"\r\n                    placeholder=\"Entrez le nom du produit\"\r\n                    required\r\n                  />\r\n                </b-form-group>\r\n                <b-row>\r\n                  <b-col>\r\n                    <b-form-group\r\n                      id=\"input-group-amount\"\r\n                      label=\"Prix\"\r\n                      label-for=\"input-amount\"\r\n                    >\r\n                      <b-form-input\r\n                        id=\"input-amount\"\r\n                        v-model=\"product.amount\"\r\n                        placeholder=\"Prix\"\r\n                        required\r\n                      />\r\n                    </b-form-group>\r\n                  </b-col>\r\n                  <b-col>\r\n                    <b-form-group\r\n                      id=\"input-group-currency\"\r\n                      label=\"devise\"\r\n                      label-for=\"input-currency\"\r\n                    >\r\n                      <b-form-input\r\n                        id=\"input-currency\"\r\n                        v-model=\"product.currency\"\r\n                        readonly\r\n                        required\r\n                      />\r\n                    </b-form-group>\r\n                  </b-col>\r\n                </b-row>\r\n                <div>\r\n                  <b-form-group\r\n                    id=\"input-sales\"\r\n                    label=\"Quantité\"\r\n                    label-for=\"input-sales\"\r\n                    \r\n                  > <b-form-input\r\n                        id=\"input-sales\"\r\n                        v-model=\"product.sales\"\r\n                        required\r\n                      />\r\n                </b-form-group>\r\n                  <b-form-group\r\n                    id=\"input-group-overview\"\r\n                    label=\"sous titre\"\r\n                    label-for=\"input-overview\"\r\n                  >\r\n                    <vue-editor\r\n                      @keyup=\"\r\n                        productSubTitleAlert ? (productSubTitleAlert = false) : 1\r\n                      \"\r\n                      required\r\n                      id=\"input-overview\"\r\n                      v-model=\"product.subtitle\"\r\n                    >\r\n                    </vue-editor>\r\n                  </b-form-group>\r\n                </div>\r\n              </b-col>\r\n              <b-col>\r\n                <b-form-group label=\"Product Category\">\r\n                  <b-row>\r\n                    <b-col>\r\n                      <b-dropdown\r\n                        id=\"dropdown-category\"\r\n                        :text=\"selectedCategory\"\r\n                        variant=\"warning\"\r\n                        block\r\n                        menu-class=\"w-100\"\r\n                      >\r\n                        <b-dropdown-item\r\n                          v-for=\"category in categoryList\"\r\n                          :key=\"category.id\"\r\n                          @click=\"set_category(category)\"\r\n                        >\r\n                          {{ category.name }}\r\n                        </b-dropdown-item>\r\n                        <b-dropdown-form @submit.stop.prevent=\"createNewCateg\">\r\n                          <b-row>\r\n                            <b-col>\r\n                              <b-form-input\r\n                                required\r\n                                v-model=\"newCategoryName\"\r\n                                placeholder=\"Nom de catégorie\"\r\n                              />\r\n                            </b-col>\r\n                            <b-col>\r\n                              <b-button type=\"submit\" block variant=\"warning\">\r\n                                Créer\r\n                              </b-button>\r\n                            </b-col>\r\n                          </b-row>\r\n                        </b-dropdown-form>\r\n                      </b-dropdown>\r\n                    </b-col>\r\n                  </b-row>\r\n                  <b-row class=\"mt-4\">\r\n                    <b-col>\r\n                      <b-dropdown\r\n                        id=\"dropdown-subCategory\"\r\n                        :text=\"selectedSubCategory\"\r\n                        variant=\"warning\"\r\n                        block\r\n                        menu-class=\"w-100\"\r\n                        :disabled=\"product.CategoryId == 0\"\r\n                      >\r\n                        <div\r\n                          v-for=\"subCategory in subCategoryList\"\r\n                          :key=\"subCategory.id\"\r\n                        >\r\n                          <b-dropdown-item\r\n                            v-if=\"product.CategoryId == subCategory.CategoryId\"\r\n                            @click=\"set_subCategory(subCategory)\"\r\n                          >\r\n                            {{ subCategory.name }}\r\n                          </b-dropdown-item>\r\n                        </div>\r\n                        <b-dropdown-form @submit.stop.prevent=\"createNewSubCateg\">\r\n                          <b-row>\r\n                            <b-col>\r\n                              <b-form-input\r\n                                required\r\n                                v-model=\"newSubCategoryName\"\r\n                                placeholder=\"Nom de catégorie\"\r\n                              />\r\n                            </b-col>\r\n                            <b-col>\r\n                              <b-button type=\"submit\" block variant=\"warning\">\r\n                                Créer\r\n                              </b-button>\r\n                            </b-col>\r\n                          </b-row>\r\n                        </b-dropdown-form>\r\n                      </b-dropdown>\r\n                    </b-col>\r\n                  </b-row>\r\n                  <b-row class=\"mt-4\">\r\n                    <b-col>\r\n                      <b-dropdown\r\n                        id=\"dropdown-subSubCategory\"\r\n                        :text=\"selectedSubSubCategory\"\r\n                        variant=\"warning\"\r\n                        block\r\n                        menu-class=\"w-100\"\r\n                        :disabled=\"product.SubCategoryId == 0\"\r\n                      >\r\n                        <div\r\n                          v-for=\"subSubCategory in subSubCategoryList\"\r\n                          :key=\"subSubCategory.id\"\r\n                        >\r\n                          <b-dropdown-item\r\n                            v-if=\"\r\n                              product.SubCategoryId ==\r\n                              subSubCategory.SubCategoryId\r\n                            \"\r\n                            @click=\"set_subSubCategory(subSubCategory)\"\r\n                          >\r\n                            {{ subSubCategory.name }}\r\n                          </b-dropdown-item>\r\n                        </div>\r\n                        <b-dropdown-form\r\n                          @submit.stop.prevent=\"createNewSubSubCateg\"\r\n                        >\r\n                          <b-row>\r\n                            <b-col>\r\n                              <b-form-input\r\n                                required\r\n                                v-model=\"newSubSubCategoryName\"\r\n                                placeholder=\"Nom de catégorie \"\r\n                              />\r\n                            </b-col>\r\n                            <b-col>\r\n                              <b-button type=\"submit\" block variant=\"warning\">\r\n                                Créer\r\n                              </b-button>\r\n                            </b-col>\r\n                          </b-row>\r\n                        </b-dropdown-form>\r\n                      </b-dropdown>\r\n                    </b-col>\r\n                  </b-row>\r\n                </b-form-group>\r\n                <b-form-group\r\n                  id=\"input-group-images\"\r\n                  label=\"Photo de produit\"\r\n                  label-for=\"input-images\"\r\n                >\r\n                  <b-form-file\r\n                    id=\"input-images\"\r\n                    placeholder=\"jusqu'à 10 photos\"\r\n                    required\r\n                    multiple\r\n                    @change=\"selectedImage\"\r\n                  />\r\n                </b-form-group>\r\n                <b-alert variant=\"warning\" class=\"mt-2\" :show=\"imageAlert\">\r\n                  {{ errorCountImage }}\r\n                </b-alert>\r\n                <div id=\"preview\">\r\n                  <b-row class=\"mt-2\">\r\n                    <b-col cols=\"3\" v-for=\"(img, index) in dispImg\" :key=\"index\">\r\n                      {{ index + 1 }}\r\n                      <b-img :src=\"img\" width=\"100%\" />\r\n                    </b-col>\r\n                  </b-row>\r\n                </div>\r\n              </b-col>\r\n            </b-row>\r\n            <hr />\r\n            <b-row>\r\n              <b-col>\r\n                <div>\r\n                  <b-form-group\r\n                    id=\"input-group-description\"\r\n                    label=\"Description\"\r\n                    label-for=\"input-description\"\r\n                  >\r\n                    <vue-editor\r\n                      @keyup=\"\r\n                        productDescriptionAlert\r\n                          ? (productDescriptionAlert = false)\r\n                          : 1\r\n                      \"\r\n                      required\r\n                      id=\"input-description\"\r\n                      v-model=\"product.description\"\r\n                    >\r\n                    </vue-editor>\r\n                  </b-form-group>\r\n                </div>\r\n              </b-col>\r\n            </b-row>\r\n            <b-alert variant=\"warning\" :show=\"productCategoryAlert\">\r\n              {{ productCategoryMessage }}\r\n            </b-alert>\r\n            <b-alert variant=\"warning\" :show=\"productSubTitleAlert\">\r\n              {{ productSubTitleMessage }}\r\n            </b-alert>\r\n            <b-alert variant=\"warning\" :show=\"productDescriptionAlert\">\r\n              {{ productDescriptionMessage }}\r\n            </b-alert>\r\n  \r\n            <b-row>\r\n              <b-col cols=\"7\"></b-col>\r\n              <b-col cols=\"5\">\r\n                <b-row>\r\n                  <b-col>\r\n                    <b-button type=\"reset\" variant=\"danger\" block>mise à zero</b-button>\r\n                  </b-col>\r\n                  <b-col>\r\n                    <b-button  @click=\"addedProduct()\" variant=\"primary\" block type=\"submit\">\r\n                      Créer Produit\r\n                    </b-button>\r\n                  </b-col>\r\n                </b-row>\r\n              </b-col>\r\n            </b-row>\r\n          </b-form>\r\n        </b-card>\r\n      </b-container>\r\n      <MyFooter class=\"mt-5\" />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import ProductsService from \"@/services/ProductsService.js\";\r\n  import CategoryService from \"@/services/CategoryService.js\";\r\n  import SubCategoryService from \"@/services/SubCategoryService.js\";\r\n  import SubSubCategoryService from \"@/services/SubSubCategoryService.js\";\r\n  import ATopHeader from \"@/components/Admins/ATopHeader.vue\";\r\n  import MyFooter from \"@/components/Common/MyFooter.vue\";\r\n  import { VueEditor } from \"vue2-editor\";\r\n  export default {\r\n    name: \"AddProduct\",\r\n    components: {\r\n      ATopHeader,\r\n      VueEditor,\r\n      MyFooter,\r\n    },\r\n    data() {\r\n      return {\r\n        images: [],\r\n        newCategoryName: \"\",\r\n        newSubCategoryName: \"\",\r\n        newSubSubCategoryName: \"\",\r\n        categoryList: [],\r\n        subCategoryList: [],\r\n        subSubCategoryList: [],\r\n        productCategoryMessage: \"Sélectionnez la catégorie de produit.\",\r\n        productCategoryAlert: false,\r\n        productSubTitleMessage: \"Ajouter un sous titre du produit.\",\r\n        productSubTitleAlert: false,\r\n        productDescriptionMessage: \"Ajoutez une description appropriée pour ce produit.\",\r\n        productDescriptionAlert: false,\r\n        selectedCategory: \"Nom de catégorie\",\r\n        selectedSubCategory: \"Nom de sous-catégorie\",\r\n        selectedSubSubCategory: \"Nom de sous-sous-catégorie\",\r\n        backupProduct: null,\r\n        product: {\r\n          code: \"\",\r\n          title: \"\",\r\n          amount: null,\r\n          sales: 0,\r\n          subtitle: \"\",\r\n          rating: 0,\r\n          peopleRated: 0,\r\n          description: \"\",\r\n          currency: \"TND\",\r\n          CategoryId: 0,\r\n          SubCategoryId: 0,\r\n          SubSubCategoryId: 0,\r\n        },\r\n        errorCountImage:\r\n          \"Vous n'êtes pas autorisé à ajouter plus de 10 images pour un produit.\",\r\n        maximumImageCount: 10,\r\n        imageAlert: false,\r\n        dispImg: [],\r\n      };\r\n    },\r\n    computed: {},\r\n    async mounted() {\r\n      this.backupProduct = this.product;\r\n      this.categoryList = (\r\n        await this.$store.dispatch(\"Category/getCategoryList\")\r\n      ).slice();\r\n  \r\n      this.subCategoryList = (\r\n        await this.$store.dispatch(\"Category/getSubCategoryList\")\r\n      ).slice();\r\n  \r\n      this.subSubCategoryList = (\r\n        await this.$store.dispatch(\"Category/getSubSubCategoryList\")\r\n      ).slice();\r\n    },\r\n    methods: {\r\n      resetProduct() {\r\n        this.product = this.backupProduct;\r\n      },\r\n      async createNewProduct() {\r\n        if (\r\n          this.product.CategoryId == 0 ||\r\n          this.product.SubCategoryId == 0 ||\r\n          this.product.SubSubCategoryId == 0\r\n        ) {\r\n          this.productCategoryAlert = true;\r\n          return;\r\n        } else if (this.product.subtitle == \"\") {\r\n          this.productSubTitleAlert = true;\r\n          return;\r\n        } else if (this.product.description == \"\") {\r\n          this.productSubTitleAlert = false;\r\n          this.productDescriptionAlert = true;\r\n          return;\r\n        }\r\n        this.product.subtitle = this.product.subtitle.replace(\r\n          /<p><br><\\/p>/g,\r\n          \"\"\r\n        );\r\n        this.product.description = this.product.description.replace(\r\n          /<p><br><\\/p>/g,\r\n          \"\"\r\n        );\r\n        var formData = new FormData();\r\n        var fieldName;\r\n        for (fieldName in this.product) {\r\n          formData.append(fieldName, this.product[fieldName]);\r\n        }\r\n        var i;\r\n        for (i = 0; i < this.images.length; i++) {\r\n          if (i < this.maximumImageCount)\r\n            formData.append(\"imageField\", this.images[i]);\r\n        }\r\n        try {\r\n          const newProduct = (await ProductsService.createProduct(formData)).data;\r\n          await this.$store.dispatch(\"Products/setAllBackupProducts\");\r\n          this.$router.push({ path: `/product/${newProduct.id}` });\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      },\r\n      async createNewCateg() {\r\n        try {\r\n          const newCategory = (\r\n            await CategoryService.createCategory({ name: this.newCategoryName })\r\n          ).data;\r\n          this.newCategoryName = \"\";\r\n          await this.$store.dispatch(\"Category/setCategoryList\");\r\n          this.categoryList.push(newCategory);\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      },\r\n      async createNewSubCateg() {\r\n        try {\r\n          const newSubCategory = (\r\n            await SubCategoryService.createSubCategory({\r\n              name: this.newSubCategoryName,\r\n              CategoryId: this.product.CategoryId,\r\n            })\r\n          ).data;\r\n          this.newSubCategoryName = \"\";\r\n          await this.$store.dispatch(\"Category/setSubCategoryList\");\r\n          this.subCategoryList.push(newSubCategory);\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      },\r\n      async createNewSubSubCateg() {\r\n        try {\r\n          const newSubSubCategory = (\r\n            await SubSubCategoryService.createSubSubCategory({\r\n              name: this.newSubSubCategoryName,\r\n              SubCategoryId: this.product.SubCategoryId,\r\n            })\r\n          ).data;\r\n          this.newSubSubCategoryName = \"\";\r\n          await this.$store.dispatch(\"Category/setSubSubCategoryList\");\r\n          this.subSubCategoryList.push(newSubSubCategory);\r\n        } catch (error) {\r\n          console.log(error.response.data.error);\r\n        }\r\n      },\r\n      set_category(category) {\r\n        this.selectedCategory = category.name;\r\n        this.selectedSubCategory = \"Sub Category\";\r\n        this.selectedSubSubCategory = \"Sub Sub Category\";\r\n        (this.product.SubCategoryId = 0),\r\n          (this.product.SubSubCategoryId = 0),\r\n          (this.product.CategoryId = category.id);\r\n      },\r\n      set_subCategory(subCategory) {\r\n        this.selectedSubCategory = subCategory.name;\r\n        this.selectedSubSubCategory = \"Sub Sub Category\";\r\n        this.product.SubCategoryId = subCategory.id;\r\n        this.product.SubSubCategoryId = 0;\r\n      },\r\n      set_subSubCategory(subSubCategory) {\r\n        this.productCategoryAlert = false;\r\n        this.selectedSubSubCategory = subSubCategory.name;\r\n        this.product.SubSubCategoryId = subSubCategory.id;\r\n      },\r\n      selectedImage(event) {\r\n        this.images = event.target.files;\r\n  \r\n        if (this.images.length > this.maximumImageCount) {\r\n          this.imageAlert = true;\r\n        } else {\r\n          this.imageAlert = false;\r\n        }\r\n        var i;\r\n  \r\n        this.dispImg = [];\r\n        for (i = 0; i < this.images.length; i++) {\r\n          if (i < this.maximumImageCount) {\r\n            this.dispImg[i] = URL.createObjectURL(this.images[i]);\r\n          }\r\n        }\r\n      },\r\n      async addedProduct(){ \r\n      this.$bvToast.toast(\"cette entreprise a ajouté un produit avec succès \", {\r\n            title: \"Ajouté\",\r\n            variant: \"success\",\r\n            toaster: \"b-toaster-top-center\",\r\n            noCloseButton: false,\r\n            solid: true,\r\n          });\r\n        },\r\n    },\r\n  };\r\n  </script>\r\n  <style lang=\"scss\" scoped></style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}