{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport ATopHeader from \"@/components/Admins/ATopHeader.vue\";\nimport MyFooter from \"@/components/Common/MyFooter.vue\";\nimport CompanyService from \"@/services/CompanyService.js\";\nimport ProductsService from '../../services/ProductsService';\nexport default {\n  name: \"NewContract\",\n  components: {\n    ATopHeader: ATopHeader,\n    MyFooter: MyFooter\n  },\n  data: function data() {\n    return {\n      startDate: null,\n      endDate: null,\n      formatName: /^^[a-zA-Z]{1,15}$/,\n      commission: null,\n      companyName: null,\n      productTitle: null\n    };\n  },\n  mounted: function mounted() {},\n  computed: {\n    tokenAlert: function tokenAlert() {\n      if (this.message == null) return null;else if (this.message.length == 0) return false;else return true;\n    },\n    CommissionValidation: function CommissionValidation() {\n      if (this.commissionF == null) return null;else if (!this.commissionF < 1) return false;else return true;\n    },\n    NameValidation: function NameValidation() {\n      if (this.Name == null) return null;else if (!this.formatName.test(this.Name)) return false;else return true;\n    }\n  },\n  methods: {\n    set_company: function set_company(company) {\n      this.companyName = company.name;\n      this.CompanyLogo = company.id;\n    },\n    newContract: function newContract() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var productId, companyId, contract;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (_this.CommissionValidation) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 2:\n              _context.prev = 2;\n              console.log(_this.productTitle);\n              _context.next = 6;\n              return ProductsService.getProductById(_this.productTitle);\n            case 6:\n              productId = _context.sent.data;\n              console.log(productId);\n              _context.next = 10;\n              return CompanyService.getCompanyByName(_this.companyName);\n            case 10:\n              companyId = _context.sent.data;\n              _context.next = 13;\n              return CompanyService.createContract({\n                startDate: _this.startDate,\n                endDate: _this.endDate,\n                commission: parseFloat(_this.commission),\n                CompanyId: companyId,\n                ProductId: productId\n              }).data;\n            case 13:\n              contract = _context.sent;\n              console.log(contract);\n              _context.next = 20;\n              break;\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](2);\n              console.error(_context.t0);\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[2, 17]]);\n      }))();\n    },\n    addedContract: function addedContract() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this2.$bvToast.toast(\"Le contrat a été ajouté avec succès\", {\n                title: \"Ajouter\",\n                variant: \"success\",\n                toaster: \"b-toaster-top-center\",\n                noCloseButton: false,\n                solid: true\n              });\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["ATopHeader","MyFooter","CompanyService","ProductsService","name","components","data","startDate","endDate","formatName","commission","companyName","productTitle","mounted","computed","tokenAlert","message","length","CommissionValidation","commissionF","NameValidation","Name","test","methods","set_company","company","CompanyLogo","id","newContract","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","productId","companyId","contract","wrap","_callee$","_context","prev","next","abrupt","console","log","getProductById","sent","getCompanyByName","createContract","parseFloat","CompanyId","ProductId","t0","error","stop","addedContract","_this2","_callee2","_callee2$","_context2","$bvToast","toast","title","variant","toaster","noCloseButton","solid"],"sources":["src/views/Admin/NewContract.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <ATopHeader />\r\n      <b-container class=\"mt-5\">\r\n        <b-row align-h=\"center\">\r\n          <b-col cols=\"7\">\r\n            <b-card style=\"color: #001e5f\">\r\n              <h4 class=\"font-weight-bold\">Nouveau contrat</h4>\r\n              <b-form @submit.stop.prevent=\"newContract\" class=\"mt-4\">\r\n                <b-row>\r\n                  <b-col>\r\n                    <b-form-group  id=\"input-start\"\r\n                      label=\"Nom d'Entreprise\"\r\n                      label-for=\"input-name\"\r\n                      >\r\n                      <b-form-input\r\n                        v-model=\"companyName\"\r\n                        id=\"input-name\"\r\n                        type=\"text\"\r\n                        :state=\"NameValidation\"\r\n                        required\r\n                      />\r\n                      <b-form-invalid-feedback\r\n                        v-if=\"companyName\"\r\n                        :state=\"NameValidation\"\r\n                      >\r\n                      Votre nom peut comporter 15 caractères.\r\n                      </b-form-invalid-feedback>\r\n                    </b-form-group>\r\n                  </b-col>\r\n                </b-row>\r\n                  <b-row>\r\n                  <b-col>\r\n                    <b-form-group\r\n                      id=\"input-start\"\r\n                      label=\"Date Début\"\r\n                      label-for=\"input-start\"\r\n                    >\r\n                      <b-form-input\r\n                        v-model=\"startDate\"\r\n                        id=\"input-last-name\"\r\n                        type=\"date\"\r\n                      \r\n                        required\r\n                      />\r\n                      \r\n                    </b-form-group>\r\n                  </b-col>\r\n                \r\n                </b-row>\r\n                <b-col>\r\n                    <b-form-group\r\n                      id=\"input-end\"\r\n                      label=\"Date Fin\"\r\n                      label-for=\"input-end\"\r\n                    >\r\n                      <b-form-input\r\n                        v-model=\"endDate\"\r\n                        id=\"input-end\"\r\n                        type=\"date\"\r\n                        \r\n                        required\r\n                      />\r\n                      \r\n                    </b-form-group>\r\n                  </b-col>\r\n                  <b-row>\r\n                  <b-col>\r\n                <b-form-group\r\n                  id=\"input-commission\"\r\n                  label=\"Commission\"\r\n                  label-for=\"input-Comission\"\r\n                >\r\n                  <b-form-input\r\n                    v-model=\"commission\"\r\n                    id=\"input-commission\"\r\n                    type=\"text\"\r\n                    \r\n                    required\r\n                  />\r\n                  <b-form-invalid-feedback\r\n                    v-if=\"commission\"\r\n                    :state=\"CommissionValidation\"\r\n                  >\r\n                  veuillez entrer un nombre inférieur à 1\r\n                  </b-form-invalid-feedback>\r\n                </b-form-group>\r\n                </b-col>\r\n                <b-form-group\r\n                  id=\"input-group-title\"\r\n                  label=\"Titre du produit\"\r\n                  label-for=\"input-title\"\r\n                >\r\n                  <b-form-input\r\n                    id=\"input-title\"\r\n                    v-model=\"productTitle\"\r\n                    placeholder=\"Entrez le nom du produit\"\r\n                    required\r\n                  />\r\n                </b-form-group>\r\n                </b-row>\r\n                    \r\n  \r\n               \r\n                <b-row class=\"mt-3\">\r\n                  <b-col cols=\"3\" />\r\n                  <b-col cols=\"6\">\r\n                    <b-button  @click=\"addedContract()\" block type=\"submit\" class=\"p-2\" variant=\"warning\">\r\n                      Nouveau contrat\r\n\r\n                    </b-button>\r\n                  </b-col>\r\n                  <b-col cols=\"3\" />\r\n                </b-row>\r\n              </b-form>\r\n              <hr />\r\n              \r\n            </b-card>\r\n          </b-col>\r\n        </b-row>\r\n      </b-container>\r\n      <MyFooter class=\"mt-5\" />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import ATopHeader from \"@/components/Admins/ATopHeader.vue\";\r\n  import MyFooter from \"@/components/Common/MyFooter.vue\";\r\n  import CompanyService from \"@/services/CompanyService.js\";\r\nimport ProductsService from '../../services/ProductsService';\r\n  export default {\r\n    name: \"NewContract\",\r\n    components: {\r\n      ATopHeader,\r\n      MyFooter,\r\n    },\r\n    data() {\r\n      return {\r\n        startDate: null,\r\n        endDate: null,\r\n        formatName: /^^[a-zA-Z]{1,15}$/,\r\n        commission: null,\r\n        companyName:  null,\r\n        \r\n        \r\n        productTitle: null,\r\n      };\r\n    },\r\n    mounted() {\r\n      \r\n    },\r\n    computed: {\r\n      tokenAlert() {\r\n        if (this.message == null) return null;\r\n        else if (this.message.length == 0) return false;\r\n        else return true;\r\n      },\r\n    \r\n      CommissionValidation() {\r\n        if (this.commissionF == null) return null;\r\n        else if (!this.commissionF< 1 ) return false;\r\n        else return true;\r\n      },\r\n      NameValidation() {\r\n        if (this.Name == null) return null;\r\n        else if (!this.formatName.test(this.Name)) return false;\r\n        \r\n        else return true;\r\n      },\r\n    },\r\n    methods: {\r\n        set_company(company) {\r\n        this.companyName = company.name;\r\n        this.CompanyLogo = company.id;\r\n      },\r\n\r\n      async newContract() {\r\n        if (\r\n          \r\n          !this.CommissionValidation       \r\n        )\r\n          return;\r\n        try {\r\n          console.log(this.productTitle);\r\n          const productId = (await ProductsService.getProductById(this.productTitle)).data;\r\n          console.log(productId);\r\n            const companyId = (await CompanyService.getCompanyByName(this.companyName)).data;\r\n          const contract = await CompanyService.createContract({\r\n            startDate: this.startDate,\r\n            endDate: this.endDate,\r\n            commission: parseFloat(this.commission),\r\n          \r\n            CompanyId: companyId,\r\n            ProductId: productId,\r\n  \r\n          }).data;\r\n          console.log(contract);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n      },\r\n      async addedContract(){ \r\n      this.$bvToast.toast(\"Le contrat a été ajouté avec succès\", {\r\n            title: \"Ajouter\",\r\n            variant: \"success\",\r\n            toaster: \"b-toaster-top-center\",\r\n            noCloseButton: false,\r\n            solid: true,\r\n          });\r\n        },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped lang=\"scss\"></style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}