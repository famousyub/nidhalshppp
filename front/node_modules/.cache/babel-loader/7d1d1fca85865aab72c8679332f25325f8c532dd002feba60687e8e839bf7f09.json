{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.string.trim.js\";\nexport default {\n  name: \"TopHeader\",\n  data: function data() {\n    return {\n      user: {},\n      admin: false,\n      companyLogo: \"\",\n      userLoggedIn: false,\n      categoryList: [],\n      searchTxt: \"\",\n      searchCategoryId: 0,\n      searchCategoryName: \"Toutes les catégories\"\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _this.$store.dispatch(\"http://localhost:8084/public/company/EShopping/eshopping.png\");\n          case 2:\n            _this.companyLogo = _context.sent;\n            _this.user = _this.$store.state.CurrentUser.user;\n            _this.admin = _this.$store.state.CurrentUser.admin;\n            _this.userLoggedIn = _this.$store.state.CurrentUser.userLoggedIn;\n            _context.next = 8;\n            return _this.$store.dispatch(\"Category/getCategoryList\");\n          case 8:\n            _this.categoryList = _context.sent;\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  },\n  computed: {},\n  methods: {\n    wishlist: function wishlist() {\n      if (!this.userLoggedIn) {\n        this.$bvToast.toast(\"Veuillez vous connecter pour la Liste de souhaits\", {\n          title: \"Liste de souhaits\",\n          variant: \"primary\",\n          toaster: \"b-toaster-top-center\",\n          noCloseButton: false,\n          solid: true\n        });\n      } else {\n        this.$router.push({\n          path: \"/wishlist\"\n        });\n      }\n    },\n    cart: function cart() {\n      if (!this.userLoggedIn) {\n        this.$bvToast.toast(\"Veuillez vous connecter pour le chariot\", {\n          title: \"Chariot\",\n          variant: \"primary\",\n          toaster: \"b-toaster-top-center\",\n          noCloseButton: false,\n          solid: true\n        });\n      } else {\n        this.$router.push({\n          path: \"/cart-view\"\n        });\n      }\n    },\n    logout: function logout() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this2.$store.dispatch(\"CurrentUser/setToken\", \"\");\n              _this2.$store.dispatch(\"CurrentUser/setUser\", {});\n              _this2.$store.dispatch(\"Wishlist/clearWishlist\");\n              _this2.$store.dispatch(\"Cart/clearCart\");\n              window.location.reload();\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    set_category: function set_category(category) {\n      this.searchCategoryId = category.id;\n      this.searchCategoryName = category.name;\n    },\n    search: function search() {\n      var newRoute = \"/products\";\n      if (this.searchCategoryId != 0) {\n        var category = this.searchCategoryName;\n        newRoute += \"/\" + category;\n      }\n      if (this.searchTxt.trim() != \"\") {\n        var text = this.searchTxt.trim();\n        newRoute += \"?q=\" + text;\n        this.$router.push({\n          path: newRoute\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","admin","companyLogo","userLoggedIn","categoryList","searchTxt","searchCategoryId","searchCategoryName","mounted","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$store","dispatch","sent","state","CurrentUser","stop","computed","methods","wishlist","$bvToast","toast","title","variant","toaster","noCloseButton","solid","$router","push","path","cart","logout","_this2","_callee2","_callee2$","_context2","window","location","reload","set_category","category","id","search","newRoute","trim","text"],"sources":["src/components/Common/TopHeader.vue"],"sourcesContent":["<template>\r\n  <div class=\"header-2\"> \r\n    \r\n    \r\n    \r\n    \r\n    <b-navbar toggleable=\"lg\" type=\"dark\" variant=\"dark\" style=\"background-color: #3b5998;\"  \r\n    \r\n  \r\n    >\r\n\r\n    <div class=\"container px-4 mx-auto md:flex md:items-center\">\r\n\r\n      <b-container>\r\n\r\n\r\n        <b-navbar-brand href=\"/\">\r\n          <b-img src=\"http://localhost:8084/public/EShopping/logo.png\" alt=\"logo\" width=\"70px\" height=\"60px\" />\r\n        </b-navbar-brand>\r\n        <b-navbar-toggle target=\"nav-top-header-collapse\" />\r\n        <b-collapse id=\"nav-top-header-collapse\" is-nav>\r\n          <b-navbar-nav class=\"mr-auto\">\r\n            <b-nav-item-dropdown right>\r\n              <template #button-content>\r\n                <b-icon-search></b-icon-search>\r\n              </template>\r\n              <b-dropdown-item v-for=\"category in categoryList\" :key=\"category.id\" @click=\"set_category(category)\">\r\n                {{ category.name }}\r\n              </b-dropdown-item>\r\n            </b-nav-item-dropdown>\r\n            <b-nav-form v-on:submit.prevent=\"search\" class=\"ml-auto mr-2\">\r\n              <b-form-input v-model=\"searchTxt\" placeholder=\"Chercher par catégories\" />\r\n              <b-button type=\"submit\" variant=\"outline-light\">\r\n                <b-icon-search></b-icon-search>\r\n              </b-button>\r\n            </b-nav-form>\r\n          </b-navbar-nav>\r\n          <b-navbar-nav class=\"ml-auto\">\r\n            <b-nav-item @click=\"wishlist\">\r\n              <b-icon-suit-heart-fill></b-icon-suit-heart-fill>\r\n              Liste de souhaits\r\n            </b-nav-item>\r\n            <b-nav-item @click=\"cart\">\r\n              <b-icon-cart2></b-icon-cart2>\r\n              Chariot\r\n            </b-nav-item>\r\n            <b-nav-item-dropdown right v-if=\"userLoggedIn\">\r\n              <template #button-content>\r\n                <b-img :src=\"user.profileImage\" alt=\"Profile Image\" height=\"35px\" width=\"35px\" />\r\n              </template>\r\n              <b-dropdown-item v-if=\"user.priority==1\" to=\"/admin\">Panneau d'Administration</b-dropdown-item>\r\n              <b-dropdown-item v-if=\"user.priority==2\" to=\"/supplier\">Panneau Fournisseur</b-dropdown-item>\r\n              <b-dropdown-item to=\"/profile\">Profile</b-dropdown-item>\r\n              <b-dropdown-item @click=\"logout\">Log Out</b-dropdown-item>\r\n            </b-nav-item-dropdown>\r\n            <b-button v-if=\"!userLoggedIn\" to=\"/login\" variant=\"outline-light\" class=\"ml-auto\">S'inscrire &amp; Connexion</b-button>\r\n          </b-navbar-nav>\r\n        </b-collapse>\r\n      </b-container>\r\n\r\n    </div>\r\n    </b-navbar>\r\n\r\n\r\n    <hr class=\"my-0\" style=\"background-color: #000\" />\r\n\r\n\r\n  </div>\r\n</template>\r\n  <script>\r\n  export default {\r\n    name: \"TopHeader\",\r\n    data() {\r\n      return {\r\n        user: {},\r\n        admin: false,\r\n        companyLogo: \"\",\r\n        userLoggedIn: false,\r\n        categoryList: [],\r\n        searchTxt: \"\",\r\n        searchCategoryId: 0,\r\n        searchCategoryName: \"Toutes les catégories\",\r\n\r\n      };\r\n    },\r\n    async mounted() {\r\n      this.companyLogo = await this.$store.dispatch(\"http://localhost:8084/public/company/EShopping/eshopping.png\"); \r\n      this.user = this.$store.state.CurrentUser.user;\r\n  \r\n      this.admin = this.$store.state.CurrentUser.admin;\r\n      this.userLoggedIn = this.$store.state.CurrentUser.userLoggedIn;\r\n      this.categoryList = await this.$store.dispatch(\"Category/getCategoryList\");\r\n    },\r\n    computed: {},\r\n    methods: {\r\n      wishlist() {\r\n        if (!this.userLoggedIn) {\r\n          this.$bvToast.toast(\"Veuillez vous connecter pour la Liste de souhaits\", {\r\n            title: \"Liste de souhaits\",\r\n            variant: \"primary\",\r\n            toaster: \"b-toaster-top-center\",\r\n            noCloseButton: false,\r\n            solid: true,\r\n          });\r\n        } else {\r\n          this.$router.push({ path: \"/wishlist\" });\r\n        }\r\n      },\r\n      cart() {\r\n        if (!this.userLoggedIn) {\r\n          this.$bvToast.toast(\"Veuillez vous connecter pour le chariot\", {\r\n            title: \"Chariot\",\r\n            variant: \"primary\",\r\n            toaster: \"b-toaster-top-center\",\r\n            noCloseButton: false,\r\n            solid: true,\r\n          });\r\n        } else {\r\n          this.$router.push({ path: \"/cart-view\" });\r\n        }\r\n      },\r\n      async logout() {\r\n        this.$store.dispatch(\"CurrentUser/setToken\", \"\");\r\n        this.$store.dispatch(\"CurrentUser/setUser\", {});\r\n        this.$store.dispatch(\"Wishlist/clearWishlist\");\r\n        \r\n        this.$store.dispatch(\"Cart/clearCart\"  );\r\n        window.location.reload();\r\n      },\r\n      set_category(category) {\r\n        this.searchCategoryId = category.id;\r\n        this.searchCategoryName = category.name;\r\n      },\r\n      search() {\r\n        var newRoute = \"/products\";\r\n        if (this.searchCategoryId != 0) {\r\n          const category = this.searchCategoryName;\r\n          newRoute += \"/\" + category;\r\n        }\r\n        if (this.searchTxt.trim() != \"\") {\r\n          const text = this.searchTxt.trim();\r\n          newRoute += \"?q=\" + text;\r\n          this.$router.push({ path: newRoute });\r\n        }\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n.navbar {\r\n  background-color: #3b5998;\r\n}\r\n</style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}