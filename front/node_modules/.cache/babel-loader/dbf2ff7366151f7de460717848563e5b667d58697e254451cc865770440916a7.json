{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/g702306/Desktop/testy000/appliomm/E--commerce/pfa/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport TopHeader from \"@/components/Common/TopHeader.vue\";\nimport MyFooter from \"@/components/Common/MyFooter.vue\";\nimport OrderService from \"@/services/OrderService.js\";\nimport OrderItemService from \"@/services/OrderItemService.js\";\nexport default {\n  name: \"Successful\",\n  components: {\n    TopHeader: TopHeader,\n    MyFooter: MyFooter\n  },\n  data: function data() {\n    return {\n      order: {},\n      session: {},\n      validSession: false,\n      name: null,\n      email: null,\n      address: null,\n      status: null,\n      variant: null,\n      checkoutSessionId: null,\n      productCost: null,\n      currency: \"TND\",\n      shippingCost: null\n    };\n  },\n  computed: {},\n  mounted: function mounted() {},\n  methods: {\n    newOrder: function newOrder(req, res) {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var order, i, orderitem;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return OrderService.createOrder({\n                name: req.body.customerName,\n                email: req.body.customerEmail,\n                phoneNo: req.body.customerPhoneNo,\n                address: req.body.shippingAddress,\n                status: \"en cours\",\n                variant: \"dark\",\n                checkoutSessionId: 25,\n                productCost: req.body.totalAmount,\n                currency: \"TND\",\n                shippingCost: req.body.shipping\n              });\n            case 3:\n              order = _context.sent.data;\n              res(order);\n              console.log(order);\n              _context.next = 11;\n              break;\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0.response.data.error);\n            case 11:\n              _context.prev = 11;\n              i = 0;\n            case 13:\n              if (!(i < _this.checkoutProduct.length)) {\n                _context.next = 21;\n                break;\n              }\n              _context.next = 16;\n              return OrderItemService.createOrderItem({\n                quantity: _this.checkoutProduct[i].quantity,\n                ProductId: _this.checkoutProduct[i].productId,\n                OrderId: _this.order.id\n              });\n            case 16:\n              orderitem = _context.sent.data;\n              console.log(orderitem);\n            case 18:\n              i++;\n              _context.next = 13;\n              break;\n            case 21:\n              _context.next = 26;\n              break;\n            case 23:\n              _context.prev = 23;\n              _context.t1 = _context[\"catch\"](11);\n              console.log(_context.t1.response.data.error);\n            case 26:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 8], [11, 23]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["TopHeader","MyFooter","OrderService","OrderItemService","name","components","data","order","session","validSession","email","address","status","variant","checkoutSessionId","productCost","currency","shippingCost","computed","mounted","methods","newOrder","req","res","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","i","orderitem","wrap","_callee$","_context","prev","next","createOrder","body","customerName","customerEmail","phoneNo","customerPhoneNo","shippingAddress","totalAmount","shipping","sent","console","log","t0","response","error","checkoutProduct","length","createOrderItem","quantity","ProductId","productId","OrderId","id","t1","stop"],"sources":["src/views/Paymoney/Successful.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <TopHeader></TopHeader>\r\n      <b-container class=\"mt-5\">\r\n        <b-row align-h=\"center\">\r\n          <b-col cols=\"6\" class=\"text-center\">\r\n            <b-card\r\n              border-variant=\"primary\"\r\n              header=\"Succeeded\"\r\n              header-bg-variant=\"primary\"\r\n              header-text-variant=\"white\"\r\n              align=\"center\"\r\n            >\r\n              <b-button size=\"lg\" disabled variant=\"primary\">\r\n                <b-icon icon=\"check\" scale=\"3\" />\r\n              </b-button>\r\n              <h1 class=\"mt-4\">Vous êtes prêt !</h1>\r\n              <h6>Merci pour votre achat!</h6>\r\n              <h6>Nous livrerons votre commande en quelques minutes.</h6>\r\n              <b-card-footer class=\"mt-4\"> EShopping </b-card-footer>\r\n            </b-card>\r\n          </b-col>\r\n        </b-row>\r\n      </b-container>\r\n      <MyFooter class=\"mt-5\" />\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import TopHeader from \"@/components/Common/TopHeader.vue\";\r\n  import MyFooter from \"@/components/Common/MyFooter.vue\";\r\n  import OrderService from \"@/services/OrderService.js\";\r\n  import OrderItemService from \"@/services/OrderItemService.js\";\r\n \r\n  export default {\r\n    name: \"Successful\",\r\n    components: {\r\n      TopHeader,\r\n      MyFooter,\r\n    },\r\n    data() {\r\n      return {\r\n        order: {},\r\n        session: {},\r\n        validSession: false,\r\n        name:null,\r\n        email:null,\r\n        address:null,\r\n        status:null,\r\n        variant:null,\r\n        checkoutSessionId:null,\r\n        productCost:null,\r\n        currency:\"TND\",\r\n        shippingCost:null,\r\n      };\r\n    },\r\n    computed: {},\r\n     mounted() {},\r\n    methods: {\r\n\r\n      \r\n        async newOrder(req , res){\r\n          try { \r\n          const order = ( await OrderService.createOrder({\r\n            name: req.body.customerName,\r\n            email: req.body.customerEmail,\r\n            phoneNo: req.body.customerPhoneNo,\r\n            address: req.body.shippingAddress,\r\n            status: \"en cours\",\r\n            variant: \"dark\",\r\n            checkoutSessionId: 25,\r\n            productCost: req.body.totalAmount ,\r\n            currency :\"TND\",\r\n            shippingCost: req.body.shipping ,\r\n\r\n          })  \r\n        ).data;\r\n        res(order);\r\n            console.log(order);\r\n          \r\n\r\n \r\n      } catch (error) {\r\n        console.log(error.response.data.error);\r\n      }\r\n        \r\n      try {\r\n        for (let i = 0; i < this.checkoutProduct.length; i++) {\r\n        const orderitem =(await OrderItemService.createOrderItem({\r\n            quantity: this.checkoutProduct[i].quantity,\r\n            ProductId : this.checkoutProduct[i].productId,\r\n            OrderId : this.order.id,\r\n        })).data; \r\n        console.log(orderitem);\r\n      }\r\n      \r\n      }catch (error) {\r\n        console.log(error.response.data.error);\r\n      }\r\n      \r\n\r\n    }}\r\n   \r\n  };\r\n  </script>\r\n  \r\n  <style lang=\"scss\" scoped></style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}